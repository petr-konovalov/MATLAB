function res = calcB(X)
    global l1 r1 r2 m1 m2 G;
    res = [2*m2*X(2)*X(3)*X(4) - G*m2*cos(X(1))*X(2) - 2*l1^2*m2*cos(2*X(1))*X(3)^2 - 2*m1*r1^2*cos(2*X(1))*X(3)^2 - 2*m2*r2^2*cos(2*X(1))*X(3)^2 - 2*l1*m2*X(3)*X(4) - 2*m2*r2*X(3)*X(4) + G*l1*m2*cos(X(1)) + G*m1*r1*cos(X(1)) + G*m2*r2*cos(X(1)) - 2*m2*cos(2*X(1))*X(2)^2*X(3)^2 + 4*l1*m2*sin(2*X(1))*X(3)*X(4) - 4*l1*m2*r2*cos(2*X(1))*X(3)^2 + 4*m2*r2*sin(2*X(1))*X(3)*X(4) + 4*l1*m2*cos(2*X(1))*X(2)*X(3)^2 - 4*m2*sin(2*X(1))*X(2)*X(3)*X(4) + 4*m2*r2*cos(2*X(1))*X(2)*X(3)^2; l1*m2*X(3)^2 + m2*r2*X(3)^2 - G*m2*sin(X(1)) - m2*X(2)*X(3)^2 + l1*m2*sin(2*X(1))*X(3)^2 + m2*r2*sin(2*X(1))*X(3)^2 - m2*sin(2*X(1))*X(2)*X(3)^2 + 3*m2*cos(2*X(1))*X(3)*X(4)];
end